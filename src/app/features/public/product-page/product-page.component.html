<section class="hero-grid">
  <div>
    <span class="badge">Limited Release</span>
    <h1 class="page-title">
      <ng-container *ngIf="!loading(); else titleSkeleton">
        {{ product()?.name }}
      </ng-container>
    </h1>
    <ng-template #titleSkeleton>
      <app-skeleton height="36px" width="80%" />
    </ng-template>

    <p class="page-subtitle" *ngIf="!loading(); else subtitleSkeleton">
      {{ product()?.description }}
    </p>
    <ng-template #subtitleSkeleton>
      <app-skeleton height="18px" width="90%" />
    </ng-template>

    <div class="price-row" *ngIf="!loading(); else priceSkeleton">
      <div class="price">
        {{ product()?.price | currency: currency() }}
      </div>
      <span>Secure one-time payment</span>
    </div>
    <ng-template #priceSkeleton>
      <app-skeleton height="28px" width="140px" />
    </ng-template>

    <div class="actions">
      <a class="btn btn-primary" routerLink="/checkout">Buy Now</a>
      <button type="button" class="btn btn-ghost">View Specs</button>
    </div>

    <div class="pill-group" *ngIf="!loading(); else featureSkeleton">
      <span class="pill" *ngFor="let feature of product()?.features">{{ feature }}</span>
    </div>
    <ng-template #featureSkeleton>
      <div class="pill-group">
        <app-skeleton height="36px" width="140px" />
        <app-skeleton height="36px" width="180px" />
        <app-skeleton height="36px" width="160px" />
      </div>
    </ng-template>
  </div>

  <div class="card product-card">
    <div class="image-gallery">
      <div class="main-image">
        <img [src]="selectedImage()" [alt]="product()?.name || 'Product preview'" />
      </div>
      <div class="thumbnail-images" *ngIf="imageUrls().length > 1">
        <button
          type="button"
          class="thumbnail"
          *ngFor="let imageUrl of imageUrls(); let i = index"
          [class.active]="selectedImageIndex() === i"
          (click)="selectImage(i)"
          [aria-label]="'Select image ' + (i + 1)"
        >
          <img [src]="imageUrl" [alt]="'Product thumbnail ' + (i + 1)" />
        </button>
      </div>
    </div>
    <div class="product-meta">
      <div>
        <strong>Premium delivery</strong>
        <p>Ships within 24 hours worldwide.</p>
      </div>
      <div>
        <strong>Support</strong>
        <p>24/7 concierge setup guidance.</p>
      </div>
    </div>
  </div>
</section>

<section class="product-details" *ngIf="!loading() && product()">
  <h2>Product Details</h2>
  <div class="details-grid">
    <div class="detail-item" *ngIf="product()?.size">
      <strong>Size:</strong>
      <span>{{ product()?.size }}</span>
    </div>
    <div class="detail-item" *ngIf="product()?.color">
      <strong>Colour:</strong>
      <span>{{ product()?.color }}</span>
    </div>
    <div class="detail-item" *ngIf="product()?.material">
      <strong>Material:</strong>
      <span>{{ product()?.material }}</span>
    </div>
    <div class="detail-item" *ngIf="product()?.brand">
      <strong>Brand:</strong>
      <span>{{ product()?.brand }}</span>
    </div>
    <div class="detail-item" *ngIf="product()?.ply_rating">
      <strong>Ply rating:</strong>
      <span>{{ product()?.ply_rating }}</span>
    </div>
  </div>

  <div class="about-section" *ngIf="product()?.about && product()?.about!.length > 0">
    <h3>About this item</h3>
    <ul class="about-list">
      <li *ngFor="let item of product()?.about">{{ item }}</li>
    </ul>
  </div>
</section>
